<html>
  <head>
    <meta charset="utf-8">
    <title>Chatitude!</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="styles/styles.css">

  </head>
  <body>
  <h1>Chatitude!</h1>
  	<div class = "logins">
	  <form class = "signup">
	    <input type="text" id="newusername" placeholder="New Username"><br>
	    <input type="text" id="newpassword" placeholder="New Password"><br>
	    <input type="submit" value="Submit">
	  </form>
	  <form class = "signin">
	    <input type="text" id="username" placeholder="Returning Username"><br>
	    <input type="text" id="password" placeholder="Password"><br>
	    <input type="submit" value="Submit">
	  </form>
	</div>
	<div class="rowTwo">
	  <form class = "messageBox">
	    <input type="text" id="message" placeholder="Please enter your message"><br>
	    <input type="submit" value="Submit">
	    <button class="refresh">Get new messages</button>
	  </form>
	</div>

  	<p>
  	<div id="app"></div>

    <!-- dependencies -->
    <script type="text/javascript" src="bower_components/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="minivents-master/minivents.js"></script>
    <!-- our scripts -->
    <script type="text/javascript" src="src/app.js"></script>
    <script type="text/javascript" src="src/model.js"></script>
    <script type="text/javascript" src="src/events.js"></script>
    <!-- <script type="text/javascript" src="src/m-v-presenter.js"></script> -->
    <script src="src/m-v-controller.js"></script>
    <script type="text/javascript">
    	Model.getMessages();
    	var elem = $('#app');
    	//Presenter.mount(elem);
    	MessageStuff.mount(elem);
    	$('.signup').submit(function(e){
    		e.preventDefault();
    		Model.signUp($("#newusername").val(), $("#newpassword").val())
    		alert($('#newusername').val()+ " has signed up")
    		$('#newusername').val('');
    		$('#newpassword').val('');
    	})
    	$('.signin').submit(function(e){
    		e.preventDefault();
    		Model.signIn($("#username").val(), $("#password").val())
    		alert($('#username').val()+ " has signed in")
    		$('#username').val('');
    		$('#password').val('');

    	})
    	$('.messageBox').submit(function(e){
    		e.preventDefault();
    		Model.postMessage($("#message").val())
    		Model.getMessages();
    		alert('Message submitted')
    		$('#message').val('')

    	})
    	$('.refresh').on('click', function(e){
    		console.log('refresh');
    		e.preventDefault();
    		Model.getMessages();
    	})
    	window.setTimeout(Model.getMessages.bind(this), 10000);
    </script> 	
  </body>
</html>